{"id":"maggie-0lg","title":"Phase 4: Self-Hosting Compiler (Epic)","description":"Write Maggie compiler in Maggie itself. Keep Go compiler for AOT compilation. Bootstrap: compile Maggie compiler with Go compiler, then compile compiler with itself.","status":"closed","priority":2,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:07:22.504952-05:00","created_by":"chazu","updated_at":"2026-01-19T18:08:32.389545-05:00","closed_at":"2026-01-19T18:08:32.389545-05:00","close_reason":"Duplicate epic - using maggie-8rg instead"}
{"id":"maggie-0xs","title":"Lexer: tokenize operators and punctuation","description":"Handle binary selectors (+, -, *, /, \u003c, \u003e, =, ~, etc.) and punctuation (., ;, ^, |, :=, [, ], (, ), {, }). Test: (Lexer on: '+ := [ ]') allTokens size = 5","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:45.158561-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.441422-05:00","closed_at":"2026-01-19T19:08:47.441422-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-0xs","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.630451-05:00","created_by":"chazu"},{"issue_id":"maggie-0xs","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:01.950445-05:00","created_by":"chazu"}]}
{"id":"maggie-13c","title":"Bug: OpStoreGlobal does nothing","description":"OpStoreGlobal is parsed but does nothing - value stays on stack, no actual store happens. Location: vm/interpreter.go lines 383-388. The opcode handler needs to actually store the value to the global.","status":"closed","priority":1,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:07.928011-05:00","created_by":"chazu","updated_at":"2026-01-21T20:56:30.894035-05:00","closed_at":"2026-01-21T20:56:30.894035-05:00","close_reason":"Fixed: OpStoreGlobal now stores values to i.Globals[name]"}
{"id":"maggie-1jg","title":"Implement JIT compilation","description":"Low priority future recommendation: The bytecode design would support JIT compilation. This could significantly improve performance for hot paths. Consider profile-guided optimization to inline frequently-called primitives.","status":"open","priority":4,"issue_type":"feature","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:32.546171-05:00","created_by":"chazu","updated_at":"2026-01-21T19:24:32.546171-05:00"}
{"id":"maggie-1km","title":"Add dedicated AST nodes for nil/true/false literals","description":"Quick win: Replace parseNil() returning *Variable with parseNilLiteral() returning *NilLiteral (and same for true/false). Currently nil, true, false are treated as variables during parsing and must be special-cased during codegen. Location: compiler/parser.go lines 760-776.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:03.700526-05:00","created_by":"chazu","updated_at":"2026-01-21T20:17:24.476026-05:00","closed_at":"2026-01-21T20:17:24.476026-05:00","close_reason":"Implemented with tests"}
{"id":"maggie-1y8","title":"Implement ImageReader (load VM state from binary)","description":"Deserialize binary image: read header, tables, classes, methods, objects, globals. Reconstruct VTables and object graph.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:40.195408-05:00","created_by":"chazu","updated_at":"2026-01-18T18:55:39.556556-05:00","closed_at":"2026-01-18T18:55:39.556556-05:00","close_reason":"Implemented with tests, all passing","dependencies":[{"issue_id":"maggie-1y8","depends_on_id":"maggie-r20","type":"blocks","created_at":"2026-01-18T18:32:06.000839-05:00","created_by":"chazu"},{"issue_id":"maggie-1y8","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:13.413337-05:00","created_by":"chazu"}]}
{"id":"maggie-29c","title":"Implement Inspector development tool","description":"Object inspector: display object class, instance variables, slot values. Navigate object graph. Support for all value types (SmallInt, Float, Symbol, Object).","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:43.405441-05:00","created_by":"chazu","updated_at":"2026-01-18T18:40:34.136869-05:00","closed_at":"2026-01-18T18:40:34.136869-05:00","close_reason":"Implemented with tests, all passing","dependencies":[{"issue_id":"maggie-29c","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:16.718486-05:00","created_by":"chazu"}]}
{"id":"maggie-2gw","title":"Parser: parse class definitions","description":"Parse class definition syntax: ClassName subclass: Superclass, instanceVars:, include: (traits), method:/classMethod:. Test: parser parseClassDef name = 'Counter'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:47.425839-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.590528-05:00","closed_at":"2026-01-19T19:12:43.590528-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-2gw","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.760068-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:18.941823-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:19.040657-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:19.138657-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:19.235004-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:19.331977-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:19.425832-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:19.519022-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:19.608374-05:00","created_by":"chazu"},{"issue_id":"maggie-2gw","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:19.706738-05:00","created_by":"chazu"}]}
{"id":"maggie-2j8","title":"Implement bytecode format and opcodes","description":"Define bytecode opcodes as specified in MAGGIE_DESIGN.md: stack ops (NOP, POP, DUP), push constants (NIL, TRUE, FALSE, SELF, INT8, INT32, LITERAL, FLOAT), variables (PUSH/STORE TEMP, IVAR, GLOBAL, CAPTURED), sends, jumps, returns, block creation.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:23.087438-05:00","created_by":"chazu","updated_at":"2026-01-18T17:10:03.957855-05:00","closed_at":"2026-01-18T17:10:03.957855-05:00","close_reason":"Implemented bytecode format with 50+ opcodes, builder/reader, label management, and disassembler","dependencies":[{"issue_id":"maggie-2j8","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.269484-05:00","created_by":"chazu"}]}
{"id":"maggie-2sv","title":"Implement String operation primitives","description":"Add Go primitives for String class: primSize, primAt:, primConcat:, primEquals:, primLessThan:, primIncludes:, primIndexOf:, primAsSymbol, primAsUppercase, primAsLowercase, primCopyFrom:to:. String.mag defines methods that delegate to these primitives.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T20:53:11.003997-05:00","created_by":"chazu","updated_at":"2026-01-19T10:02:45.130093-05:00","closed_at":"2026-01-19T10:02:45.130093-05:00","close_reason":"Implemented primitives and tests"}
{"id":"maggie-2tm","title":"Implement VTable and method dispatch","description":"Implement VTable struct with method array indexed by selector ID, parent pointer for inheritance lookup. Implement SelectorTable for interning selector names to IDs. Include lookup method with inheritance chain walking.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:19.974542-05:00","created_by":"chazu","updated_at":"2026-01-18T17:03:43.345118-05:00","closed_at":"2026-01-18T17:03:43.345118-05:00","close_reason":"Implemented SelectorTable, VTable, and Method dispatch with 25 tests and sub-2ns lookup performance","dependencies":[{"issue_id":"maggie-2tm","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.0654-05:00","created_by":"chazu"},{"issue_id":"maggie-2tm","depends_on_id":"maggie-f3p","type":"blocks","created_at":"2026-01-18T16:46:12.910017-05:00","created_by":"chazu"}]}
{"id":"maggie-2ud","title":"Codegen: emit variable access/store","description":"Emit PUSH_TEMP, STORE_TEMP, PUSH_IVAR, STORE_IVAR, PUSH_GLOBAL, STORE_GLOBAL. Track variable indices. Test: compile 'x := 1' emits PUSH_INT8 1, STORE_TEMP 0","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:03.784035-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.007394-05:00","closed_at":"2026-01-19T19:44:24.007394-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-2ud","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.546251-05:00","created_by":"chazu"}]}
{"id":"maggie-39v","title":"Add stack bounds checking with dynamic growth","description":"Quick win: The interpreter uses fixed-size stacks (stack: make([]Value, 1024), frames: make([]*CallFrame, 256)) with no dynamic growth - will panic on overflow. Add bounds checking to push() that grows the stack when needed: if i.sp \u003e= len(i.stack) { i.stack = append(i.stack, make([]Value, 1024)...) }. Location: vm/interpreter.go lines 75-78.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:06.53798-05:00","created_by":"chazu","updated_at":"2026-01-21T20:17:24.472996-05:00","closed_at":"2026-01-21T20:17:24.472996-05:00","close_reason":"Implemented with tests"}
{"id":"maggie-39w","title":"Fix memory leaks in VM (keepAlive, blockRegistry, GC)","description":"Multiple memory management issues: 1) keepAlive slice in vm/vm.go:53 grows unboundedly - objects added but never removed. 2) blockRegistry map in interpreter.go:1171-1173 never releases blocks. 3) No proper GC integration - the pointer-to-Object stored in NaN-boxed values won't be traced by Go's GC unless there's a root reference. Options: use Go's GC by making all objects referenced from a root set, implement simple mark-sweep collector, or at minimum fix the leaks.","status":"closed","priority":1,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:23:59.598244-05:00","created_by":"chazu","updated_at":"2026-01-21T20:42:26.841765-05:00","closed_at":"2026-01-21T20:42:26.841765-05:00","close_reason":"Fixed: keepAlive now uses map with mark-sweep GC; blockRegistry cleanup via releaseBlocksForFrame"}
{"id":"maggie-3av","title":"Implement CompiledMethod structure","description":"Implement CompiledMethod struct: selector, class, arity, numTemps, literals array, bytecode, nested BlockMethods. Include SourceMap for debugging (bytecode offset to line/column).","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:26.575035-05:00","created_by":"chazu","updated_at":"2026-01-18T17:12:25.45144-05:00","closed_at":"2026-01-18T17:12:25.45144-05:00","close_reason":"Implemented CompiledMethod and BlockMethod with builders, source mapping, and 25+ tests","dependencies":[{"issue_id":"maggie-3av","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.499671-05:00","created_by":"chazu"},{"issue_id":"maggie-3av","depends_on_id":"maggie-2j8","type":"blocks","created_at":"2026-01-18T16:46:13.135297-05:00","created_by":"chazu"}]}
{"id":"maggie-3ib","title":"Phase 1: Minimal VM","description":"Implement the core Maggie VM: NaN-boxed values, object layout, VTables, bytecode interpreter, and primitive classes. This is the foundation everything else builds on.","status":"closed","priority":1,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:44:35.515995-05:00","created_by":"chazu","updated_at":"2026-01-18T17:30:03.993701-05:00","closed_at":"2026-01-18T17:30:03.993701-05:00","close_reason":"Phase 1 complete: NaN-boxed values, VTable dispatch, bytecode interpreter, 17 core classes (Object, Class, Boolean, True, False, UndefinedObject, SmallInteger, Float, String, Symbol, Array, ByteArray, Association, Dictionary, Block, CompiledMethod, Metaclass) with working primitives. 106 tests passing."}
{"id":"maggie-3rn","title":"Complete the self-hosting compiler","description":"Low priority future recommendation: The codebase includes a Maggie-written compiler (lib/compiler/ with Parser.mag, Lexer.mag, BytecodeGenerator.mag) which could enable self-hosting. The Maggie compiler appears incomplete - BytecodeGenerator.mag exists but the full pipeline isn't integrated. Completing this path would be a significant milestone.","status":"open","priority":4,"issue_type":"feature","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:36.986155-05:00","created_by":"chazu","updated_at":"2026-01-21T19:24:36.986155-05:00"}
{"id":"maggie-3tr","title":"Benchmark: Message dispatch and method lookup","description":"Benchmark vtable lookup, selector interning, monomorphic vs polymorphic call sites. Measure dispatch overhead per message send.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:23.103116-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.454392-05:00","closed_at":"2026-01-22T09:18:20.454392-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-3tr","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:45.318293-05:00","created_by":"chazu"}]}
{"id":"maggie-3xz","title":"Implement primitive Object class","description":"Bootstrap Object class with core methods: class, yourself, ==, ~~, isNil, notNil, ifNil:, ifNotNil:, ifNil:ifNotNil:, perform:, perform:with:, doesNotUnderstand:. This is the root of the class hierarchy.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:28.266941-05:00","created_by":"chazu","updated_at":"2026-01-18T17:26:19.859383-05:00","closed_at":"2026-01-18T17:26:19.859383-05:00","close_reason":"Object class fully implemented with class, ==, ~~, isNil, notNil, yourself, ifNil:, ifNotNil:, perform:, doesNotUnderstand:, =, ~=, hash","dependencies":[{"issue_id":"maggie-3xz","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.606861-05:00","created_by":"chazu"},{"issue_id":"maggie-3xz","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.068344-05:00","created_by":"chazu"}]}
{"id":"maggie-43g","title":"Lexer: tokenize numbers","description":"Implement number tokenization. Handle integers (42) and floats (3.14). Handle negative sign context. Test: (Lexer on: '42 3.14') nextToken value = 42","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:19.530381-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.385466-05:00","closed_at":"2026-01-19T19:08:47.385466-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-43g","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.904917-05:00","created_by":"chazu"},{"issue_id":"maggie-43g","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:01.622623-05:00","created_by":"chazu"}]}
{"id":"maggie-4f1","title":"Lexer: tokenize symbols","description":"Implement symbol tokenization. Handle #foo and #'quoted symbols'. Test: (Lexer on: '#foo #''hello world''') nextToken value = #foo","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:38.890979-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.422246-05:00","closed_at":"2026-01-19T19:08:47.422246-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-4f1","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.724301-05:00","created_by":"chazu"},{"issue_id":"maggie-4f1","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:01.839201-05:00","created_by":"chazu"}]}
{"id":"maggie-4gd","title":"Parser: parse binary messages","description":"Parse binary message sends (a + b). Precedence: unary \u003e binary. Chain left-to-right: 1 + 2 + 3 = ((1 + 2) + 3). Test: (Parser on: '1 + 2 * 3') produces left-associated tree","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:05.556421-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.562251-05:00","closed_at":"2026-01-19T19:12:43.562251-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-4gd","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.418451-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:12.461409-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:12.550944-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:12.640017-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:12.74468-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:12.851819-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:12.947498-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:13.049468-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:13.144149-05:00","created_by":"chazu"},{"issue_id":"maggie-4gd","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:13.25987-05:00","created_by":"chazu"}]}
{"id":"maggie-4nn","title":"Split monolithic vm.go into focused modules","description":"vm/vm.go is over 1300 lines mixing concerns: bootstrap code, primitive registration, class creation, method dispatch, global management. Suggested structure: vm/vm.go (core VM struct, initialization), vm/bootstrap.go (class creation), vm/dispatch.go (Send, vtableFor), vm/primitives/ package with object.go, integer.go, boolean.go, etc.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:01.092857-05:00","created_by":"chazu","updated_at":"2026-01-21T20:18:49.596711-05:00","closed_at":"2026-01-21T20:18:49.596711-05:00","close_reason":"Completed - vm.go reduced from 1369 to 378 lines via primitives extraction"}
{"id":"maggie-4pv","title":"Parser: parse block literals","description":"Parse blocks: [:x :y | | temp | statements]. Handle parameters, temporaries, and body statements. Test: (Parser on: '[:x | x + 1]') produces BlockNode with 1 param","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:25.278778-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.574789-05:00","closed_at":"2026-01-19T19:12:43.574789-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-4pv","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.128092-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:15.313254-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:15.406244-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:15.510557-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:15.637105-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:15.742744-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:15.844532-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:15.941345-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:16.041137-05:00","created_by":"chazu"},{"issue_id":"maggie-4pv","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:16.133641-05:00","created_by":"chazu"}]}
{"id":"maggie-4vg","title":"Implement Boolean (True/False) classes","description":"Implement True and False as singleton classes with vtables for NaN-boxed special values. Primitives: ifTrue:, ifFalse:, ifTrue:ifFalse:, and:, or:, not, \u0026, |, xor:.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:36.0714-05:00","created_by":"chazu","updated_at":"2026-01-18T17:26:19.928131-05:00","closed_at":"2026-01-18T17:26:19.928131-05:00","close_reason":"True/False fully implemented with not, \u0026, |, ifTrue:, ifFalse:, ifTrue:ifFalse:, and:, or:, xor:, eqv:","dependencies":[{"issue_id":"maggie-4vg","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.132609-05:00","created_by":"chazu"},{"issue_id":"maggie-4vg","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.597837-05:00","created_by":"chazu"}]}
{"id":"maggie-4vk","title":"Phase 2: Compiler in Go","description":"Implement parser (Smalltalk syntax → AST), compiler (AST → bytecode), compile basic classes from source, add Channel/Process primitives for concurrency, implement Result/Success/Failure classes.","status":"closed","priority":1,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:31:52.268267-05:00","created_by":"chazu","updated_at":"2026-01-18T18:09:22.146719-05:00","closed_at":"2026-01-18T18:09:22.146719-05:00","close_reason":"Completed: Parser, Compiler, Channel/Process concurrency, Result/Success/Failure pattern all working with tests"}
{"id":"maggie-4w1","title":"Implement Symbol class and interning","description":"Implement SymbolTable for interning strings to symbol IDs. Symbol class with primitives: asString, =, hash. Symbols are NaN-boxed with ID payload, not heap objects.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:39.142462-05:00","created_by":"chazu","updated_at":"2026-01-18T17:29:37.139759-05:00","closed_at":"2026-01-18T17:29:37.139759-05:00","close_reason":"Symbol primitives: asString, =, hash, size, asSymbol. SymbolTable implemented in symbol.go with Intern, Lookup, Name, SymbolValue.","dependencies":[{"issue_id":"maggie-4w1","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.349214-05:00","created_by":"chazu"},{"issue_id":"maggie-4w1","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.806738-05:00","created_by":"chazu"}]}
{"id":"maggie-4xm","title":"Implement Smalltalk parser","description":"Implement recursive descent parser for Smalltalk syntax: literals, message sends (unary, binary, keyword), cascades, assignments, blocks with arguments, method definitions, class definitions. Output AST.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:10.952489-05:00","created_by":"chazu","updated_at":"2026-01-18T17:38:48.844866-05:00","closed_at":"2026-01-18T17:38:48.844866-05:00","close_reason":"Implemented recursive descent parser in compiler/parser.go. Handles: literals (int, float, string, symbol, char, array), variables (including self, super, nil, true, false), message sends (unary, binary, keyword with proper precedence), cascades, assignments, blocks with parameters and temps, parenthesized expressions, dynamic arrays, return statements, method definitions. 24 parser tests passing.","dependencies":[{"issue_id":"maggie-4xm","depends_on_id":"maggie-d6e","type":"blocks","created_at":"2026-01-18T17:32:28.750448-05:00","created_by":"chazu"},{"issue_id":"maggie-4xm","depends_on_id":"maggie-z0e","type":"blocks","created_at":"2026-01-18T17:32:28.847991-05:00","created_by":"chazu"}]}
{"id":"maggie-52s","title":"Compile basic classes from Smalltalk source","description":"Write and compile basic classes in Smalltalk source: Object extensions, Collection protocol, additional Boolean methods. Validate compiler by loading real Smalltalk code.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:21.93491-05:00","created_by":"chazu","updated_at":"2026-01-18T17:58:12.743393-05:00","closed_at":"2026-01-18T17:58:12.743393-05:00","close_reason":"Implemented non-local returns from blocks, fixed vtableFor to handle primitive types, fixed block self capture. Integration tests passing (factorial, fibonacci, max, between:and:, even, odd, abs). Closure variable capture (accessing outer temps from blocks) deferred - test skipped.","dependencies":[{"issue_id":"maggie-52s","depends_on_id":"maggie-5ir","type":"blocks","created_at":"2026-01-18T17:32:29.040805-05:00","created_by":"chazu"}]}
{"id":"maggie-5hi","title":"Extract primitive registration into vm/primitives/ package","description":"Extract primitive registration into vm/primitives/ package. NOTE: This is a larger refactoring (2-3 hours) - primitives are closures that capture *VM and access internal fields (Symbols, Classes, keepAlive, evaluateBlock, etc.). Would require defining interfaces or restructuring how primitives register. Originally estimated as quick win but is actually more involved.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:02.450794-05:00","created_by":"chazu","updated_at":"2026-01-21T20:17:24.479402-05:00","closed_at":"2026-01-21T20:17:24.479402-05:00","close_reason":"Implemented with tests"}
{"id":"maggie-5ir","title":"Implement bytecode compiler","description":"Compile AST to bytecode: literals, variable access/store, message sends, blocks (capture environment), returns. Generate CompiledMethod with bytecode, literals, source map.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:14.747807-05:00","created_by":"chazu","updated_at":"2026-01-18T17:43:06.9089-05:00","closed_at":"2026-01-18T17:43:06.9089-05:00","close_reason":"Implemented bytecode compiler in compiler/codegen.go. Compiles AST to VM bytecode: literals (int, float, string, symbol), variables (temps, args, globals), message sends (unary, binary, keyword with fast paths for arithmetic), blocks, cascades, assignments, returns. 21 codegen tests passing.","dependencies":[{"issue_id":"maggie-5ir","depends_on_id":"maggie-4xm","type":"blocks","created_at":"2026-01-18T17:32:28.943211-05:00","created_by":"chazu"}]}
{"id":"maggie-5jg","title":"Benchmark: Block creation and invocation","description":"Benchmark block allocation, capture creation, value/value:/value:value: invocations, and non-local returns.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:26.856778-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.493824-05:00","closed_at":"2026-01-22T09:18:20.493824-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-5jg","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:47.633459-05:00","created_by":"chazu"}]}
{"id":"maggie-5qz","title":"AST: Implement VariableNode class","description":"Create VariableNode for variable references. Fields: name, scope (#temp, #ivar, #global). Methods: name, scope, isVariable, accept:. Test: (VariableNode name: 'x' scope: #temp) name = 'x'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:07.370653-05:00","created_by":"chazu","updated_at":"2026-01-19T19:02:08.999661-05:00","closed_at":"2026-01-19T19:02:08.999661-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-5qz","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.354226-05:00","created_by":"chazu"}]}
{"id":"maggie-691","title":"Phase 3: Image System","description":"Implement image save/load, development tools (Inspector, Debugger), create initial dev image","status":"closed","priority":1,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:21.903583-05:00","created_by":"chazu","updated_at":"2026-01-18T19:20:52.004161-05:00","closed_at":"2026-01-18T19:20:52.004161-05:00","close_reason":"All subtasks complete: ImageWriter, ImageReader, value encoding, Inspector, Debugger, and initial development image."}
{"id":"maggie-6fy","title":"Maggie compiler: implement block variable captures","description":"The Maggie self-hosting compiler (BytecodeGenerator.mag) doesn't implement variable captures for blocks. When a block accesses variables from the enclosing method scope (e.g., [i := i + 1] in a whileTrue: loop), the block can't find those variables and falls back to treating them as globals.\n\nThe TODO in visitBlockNode: says 'Handle captures properly'. Need to:\n1. Track outer scope temps when compiling nested blocks\n2. Use OpPushHomeTemp/OpStoreHomeTemp for method-level temp access from blocks\n3. Or implement proper capture mechanism with OpCaptureTemp\n\nThis causes whileTrue: loops with variable updates to fail - the loop runs but variable updates don't persist.","status":"closed","priority":2,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-22T14:44:43.286109-05:00","created_by":"chazu","updated_at":"2026-01-22T15:12:06.665386-05:00","closed_at":"2026-01-22T15:12:06.665386-05:00","close_reason":"Fixed by moving selector to method scope and fixing Go compiler's STORE_CAPTURED handling","dependencies":[{"issue_id":"maggie-6fy","depends_on_id":"maggie-909","type":"discovered-from","created_at":"2026-01-22T14:44:55.068646-05:00","created_by":"chazu"}]}
{"id":"maggie-6gr","title":"Implement Token class in Maggie","description":"Create Token class with type (symbol) and value fields. Methods: type, value, isEOF, isIdentifier, isNumber, isString, isSymbol, isKeyword, isBinarySelector. Test: Token new type: #identifier value: 'foo'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:04.457277-05:00","created_by":"chazu","updated_at":"2026-01-19T19:01:31.914107-05:00","closed_at":"2026-01-19T19:01:31.914107-05:00","close_reason":"Implemented Token class in lib/compiler/Token.mag","dependencies":[{"issue_id":"maggie-6gr","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:51.19915-05:00","created_by":"chazu"}]}
{"id":"maggie-6kq","title":"Implement NaN-boxed Value representation","description":"Implement the 64-bit NaN-boxed Value type as described in MAGGIE_DESIGN.md. Tags for: Float (native), SmallInt (48-bit signed), Object pointer, Symbol ID, Special (nil/true/false). Include encode/decode functions and tests.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:16.7713-05:00","created_by":"chazu","updated_at":"2026-01-18T16:53:17.056244-05:00","closed_at":"2026-01-18T16:53:17.056244-05:00","close_reason":"Implemented NaN-boxed Value type with Float, SmallInt, Object pointer, Symbol, and special values. All 26 tests pass, benchmarks show \u003c0.5ns/op with zero allocations.","dependencies":[{"issue_id":"maggie-6kq","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:58.863402-05:00","created_by":"chazu"}]}
{"id":"maggie-6w8","title":"Lexer: tokenize strings","description":"Implement string literal tokenization. Handle single quotes with doubling for escapes. Test: (Lexer on: '''hello''') nextToken value = 'hello'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:21.181302-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.403373-05:00","closed_at":"2026-01-19T19:08:47.403373-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-6w8","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.814818-05:00","created_by":"chazu"},{"issue_id":"maggie-6w8","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:01.732-05:00","created_by":"chazu"}]}
{"id":"maggie-735","title":"Integration: compile class from source file","description":"Create ClassCompiler that reads .mag file and compiles entire class definition. Create or update Class object in VM. Test: ClassCompiler compileFile: 'Counter.mag'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:54.706616-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:58.425553-05:00","closed_at":"2026-01-19T19:44:58.425553-05:00","close_reason":"Implemented in lib/compiler/Compiler.mag - compileClass: and compileSourceFile:","dependencies":[{"issue_id":"maggie-735","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.593533-05:00","created_by":"chazu"}]}
{"id":"maggie-74h","title":"Parser: parse cascades","description":"Parse cascaded message sends (x foo; bar; baz). Collect messages into CascadeNode with shared receiver. Test: (Parser on: 'x foo; bar: 1') produces CascadeNode with 2 messages","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:19.555036-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.56862-05:00","closed_at":"2026-01-19T19:12:43.56862-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-74h","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.223372-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:14.299417-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:14.401634-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:14.498797-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:14.673086-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:14.776562-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:14.878591-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:14.98409-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:15.09338-05:00","created_by":"chazu"},{"issue_id":"maggie-74h","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:15.195886-05:00","created_by":"chazu"}]}
{"id":"maggie-78g","title":"Lexer: tokenize identifiers","description":"Implement identifier tokenization in Lexer. Identifiers start with letter, contain letters/digits. Keywords end with colon. Test: (Lexer on: 'foo bar: baz') nextToken type = #identifier","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:17.493075-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.361418-05:00","closed_at":"2026-01-19T19:08:47.361418-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-78g","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.997063-05:00","created_by":"chazu"},{"issue_id":"maggie-78g","depends_on_id":"maggie-6gr","type":"blocks","created_at":"2026-01-19T18:13:01.303374-05:00","created_by":"chazu"},{"issue_id":"maggie-78g","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:01.399001-05:00","created_by":"chazu"}]}
{"id":"maggie-81g","title":"AST: Implement CascadeNode class","description":"Create CascadeNode for cascaded message sends (x foo; bar; baz). Fields: receiver, messages (array of MessageSendNodes without receiver). Methods: receiver, messages, accept:. Test: cascadeNode messages size = 3","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:23.399664-05:00","created_by":"chazu","updated_at":"2026-01-19T19:03:19.671632-05:00","closed_at":"2026-01-19T19:03:19.671632-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-81g","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.068189-05:00","created_by":"chazu"}]}
{"id":"maggie-85t","title":"Implement bytecode interpreter loop","description":"Implement the core interpreter: fetch-decode-execute loop, stack management, temp/arg handling. Include fast paths for common operations (SEND_PLUS with SmallInt/Float specialization). Connect to VTable dispatch.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:24.840614-05:00","created_by":"chazu","updated_at":"2026-01-18T17:16:55.999098-05:00","closed_at":"2026-01-18T17:16:55.999098-05:00","close_reason":"Implemented bytecode interpreter with 30 tests, fast paths for arithmetic, and 55-80ns/op performance","dependencies":[{"issue_id":"maggie-85t","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.385068-05:00","created_by":"chazu"},{"issue_id":"maggie-85t","depends_on_id":"maggie-2tm","type":"blocks","created_at":"2026-01-18T16:46:13.236901-05:00","created_by":"chazu"},{"issue_id":"maggie-85t","depends_on_id":"maggie-3av","type":"blocks","created_at":"2026-01-18T16:46:13.33485-05:00","created_by":"chazu"}]}
{"id":"maggie-8o8","title":"Codegen: manage literal table","description":"Build literal table during compilation. Add literals (strings, symbols, large numbers) on first use. Return existing index if duplicate. Test: compile method with 'hello' twice adds literal once","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:32.667419-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.027137-05:00","closed_at":"2026-01-19T19:44:24.027137-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-8o8","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.997027-05:00","created_by":"chazu"}]}
{"id":"maggie-8rg","title":"Phase 4 Epic","description":"Write Maggie compiler in Maggie itself. Keep Go compiler for AOT compilation. Bootstrap: compile Maggie compiler with Go compiler, then compile compiler with itself. Components: Lexer, Parser, AST, Bytecode Generator.","status":"open","priority":2,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:07:33.874444-05:00","created_by":"chazu","updated_at":"2026-01-19T18:07:39.304348-05:00"}
{"id":"maggie-8t1","title":"Implement Class and method registration","description":"Implement Class struct (name, namespace, superclass, vtable, instVars, classVars). Support for registering primitive methods (Method0, Method1, Method2, Method3, MethodN variants to avoid slice allocation).","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:21.685869-05:00","created_by":"chazu","updated_at":"2026-01-18T17:06:39.134978-05:00","closed_at":"2026-01-18T17:06:39.134978-05:00","close_reason":"Implemented Class with inheritance, method registration, ClassTable, and 27 tests with sub-4ns performance","dependencies":[{"issue_id":"maggie-8t1","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.168038-05:00","created_by":"chazu"},{"issue_id":"maggie-8t1","depends_on_id":"maggie-2tm","type":"blocks","created_at":"2026-01-18T16:46:13.018784-05:00","created_by":"chazu"}]}
{"id":"maggie-8wy","title":"AST: Implement ClassNode class","description":"Create ClassNode for class definitions. Fields: name, superclass, instanceVars, methods, classMethods, traits. Methods: name, superclass, instanceVars, methods, accept:. Test: classNode name = 'Counter'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:44.434926-05:00","created_by":"chazu","updated_at":"2026-01-19T19:04:09.141773-05:00","closed_at":"2026-01-19T19:04:09.141773-05:00","close_reason":"Implemented ClassNode AST class with fields (name, superclassName, instanceVariables, methods, classMethods, traits), creation methods, accessors, query methods (hasInstanceVariables, hasTraits), type testing (isClass), visitor pattern (accept:), and printString","dependencies":[{"issue_id":"maggie-8wy","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.703861-05:00","created_by":"chazu"}]}
{"id":"maggie-909","title":"Bootstrap: self-compile Maggie compiler","description":"Use Maggie compiler (compiled by Go) to compile Maggie compiler source files. Compare output bytecode with Go-compiled version. Test: self-compiled compiler produces identical bytecode","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:12:13.003876-05:00","created_by":"chazu","updated_at":"2026-01-22T16:27:22.439267-05:00","closed_at":"2026-01-22T16:27:22.439267-05:00","close_reason":"Self-compile tests all pass. The Maggie compiler (compiled by Go) successfully compiles its own source files. 28 Token.mag methods compile with both compilers. Execution equivalence tests pass including loops and factorial.","dependencies":[{"issue_id":"maggie-909","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.302638-05:00","created_by":"chazu"},{"issue_id":"maggie-909","depends_on_id":"maggie-j5o","type":"blocks","created_at":"2026-01-19T18:13:29.015948-05:00","created_by":"chazu"}]}
{"id":"maggie-98g","title":"Implement mutable cells for block variable captures","description":"Maggie currently captures block variables by value, not by reference. This breaks standard Smalltalk semantics where mutations to captured variables should be visible in the outer scope.\n\nExample that fails:\n```smalltalk\n| x |\nx := 10.\n[x := x + 1] value.\nx   \"Should be 11, but is 10\"\n```\n\nNested block example:\n```smalltalk\n(test) ifTrue: [\n    | count |\n    count := 0.\n    [count \u003c 3] whileTrue: [count := count + 1].\n    ^count   \"Should be 3, returns 0\"\n]\n```\n\nFix requires:\n1. Compiler detects variables that are both captured AND assigned\n2. Those variables get allocated in heap cells (boxed)\n3. All access goes through cell indirection\n4. Both Go and Maggie compilers need updating\n\nCurrent workaround: declare variables at method scope instead of block scope (uses HOME_TEMP opcodes).","status":"closed","priority":1,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-22T15:31:24.465277-05:00","created_by":"chazu","updated_at":"2026-01-22T15:59:02.627272-05:00","closed_at":"2026-01-22T15:59:02.627272-05:00","close_reason":"Implemented mutable cells for block variable captures. Added Cell type to vm/value.go with cellRegistry to prevent GC. Added MAKE_CELL/CELL_GET/CELL_SET opcodes. Updated Go compiler with findCellVariables analysis. Added tests. Maggie compiler has opcode definitions (full analysis TODO)."}
{"id":"maggie-9e1","title":"Create test harness for bytecode execution","description":"Build a test harness that can construct bytecode directly in Go and execute it. This enables testing the interpreter without needing a parser/compiler. Include helpers for common patterns.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:42.813649-05:00","created_by":"chazu","updated_at":"2026-01-18T17:30:02.002326-05:00","closed_at":"2026-01-18T17:30:02.002326-05:00","close_reason":"Implemented via CompiledMethodBuilder in compiled_method.go and BytecodeBuilder in bytecode.go. Tests in interpreter_test.go and vm_test.go demonstrate direct bytecode construction and execution.","dependencies":[{"issue_id":"maggie-9e1","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.556139-05:00","created_by":"chazu"},{"issue_id":"maggie-9e1","depends_on_id":"maggie-85t","type":"blocks","created_at":"2026-01-18T16:46:15.906527-05:00","created_by":"chazu"}]}
{"id":"maggie-9hj","title":"Codegen: emit push instructions","description":"Emit bytecode for push operations: PUSH_NIL, PUSH_TRUE, PUSH_FALSE, PUSH_SELF, PUSH_INT8, PUSH_LITERAL. Test: compile literal 42 emits PUSH_INT8 42","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:57.703997-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.001841-05:00","closed_at":"2026-01-19T19:44:24.001841-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-9hj","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.66626-05:00","created_by":"chazu"},{"issue_id":"maggie-9hj","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:28.740351-05:00","created_by":"chazu"}]}
{"id":"maggie-9mm","title":"Implement Result/Success/Failure classes","description":"Implement Result pattern: Success wraps value, Failure wraps error. Methods: value, error, isSuccess, isFailure, ifSuccess:, ifFailure:, then:, onSuccess:onFailure:, map:, flatMap:.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:20.038244-05:00","created_by":"chazu","updated_at":"2026-01-18T18:08:24.892521-05:00","closed_at":"2026-01-18T18:08:24.892521-05:00","close_reason":"Implemented Result/Success/Failure pattern with full test coverage"}
{"id":"maggie-9nf","title":"Implement CharacterStream class","description":"Create CharacterStream class for reading source code character by character. Methods: peek, next, atEnd, position, source. Wraps a String. Test: (CharacterStream on: 'hello') next; next; peek","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:15.610714-05:00","created_by":"chazu","updated_at":"2026-01-19T19:07:49.280056-05:00","closed_at":"2026-01-19T19:07:49.280056-05:00","close_reason":"Implemented CharacterStream in lib/compiler/CharacterStream.mag","dependencies":[{"issue_id":"maggie-9nf","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:51.081281-05:00","created_by":"chazu"},{"issue_id":"maggie-9nf","depends_on_id":"maggie-6gr","type":"blocks","created_at":"2026-01-19T18:13:01.206553-05:00","created_by":"chazu"}]}
{"id":"maggie-9nn","title":"Improve error messages with source positions","description":"Medium priority recommendation: Parser should include line/column in all errors, compiler errors should reference source positions, runtime errors should include stack traces. Better error messages significantly improve developer experience.","status":"closed","priority":2,"issue_type":"feature","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:27.938371-05:00","created_by":"chazu","updated_at":"2026-01-21T21:30:07.705652-05:00","closed_at":"2026-01-21T21:30:07.705652-05:00","close_reason":"Added position-aware error methods (errorAt), stack trace support in interpreter, and enhanced primError: to include stack traces"}
{"id":"maggie-9q2","title":"Implement Array operation primitives","description":"Add Go primitives for Array class: primSize, primAt:, primAt:put:, and Array class-side new:. Array.mag defines methods that delegate to these primitives. Also need literal array support in the compiler/VM.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T20:53:14.03193-05:00","created_by":"chazu","updated_at":"2026-01-19T10:02:45.149602-05:00","closed_at":"2026-01-19T10:02:45.149602-05:00","close_reason":"Implemented primitives and tests"}
{"id":"maggie-9qm","title":"Integration: VM hook for Maggie compiler","description":"Add VM primitive to invoke Maggie compiler instead of Go compiler. Primitive compileMethod:forClass: uses Maggie Compiler class. Test: VM uses Maggie compiler for dynamic compilation","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:12:00.881925-05:00","created_by":"chazu","updated_at":"2026-01-19T19:50:25.006952-05:00","closed_at":"2026-01-19T19:50:25.006952-05:00","close_reason":"Implemented MaggieCompilerBackend that invokes the Maggie Compiler class via vm.Send(). The Compile method looks up Compiler global, creates instance, and calls compile: to get bytecode.","dependencies":[{"issue_id":"maggie-9qm","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.495504-05:00","created_by":"chazu"}]}
{"id":"maggie-9xz","title":"Design review: true/false/nil parsed as Variables","description":"Questionable design: true, false, nil are parsed as Variables instead of dedicated literal nodes. This requires special-casing during codegen and loses semantic clarity. Consider adding proper literal AST nodes. Related to the quick-win issue for adding dedicated AST nodes.","status":"closed","priority":3,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:12.246471-05:00","created_by":"chazu","updated_at":"2026-01-21T20:36:20.582405-05:00","closed_at":"2026-01-21T20:36:20.582405-05:00","close_reason":"Addressed by maggie-1km: added dedicated NilLiteral, TrueLiteral, FalseLiteral AST nodes"}
{"id":"maggie-a6j","title":"Phase 3: Image System","description":"Implement image save/load, development tools (Inspector, Debugger), and create initial development image. See MAGGIE_DESIGN.md for binary format spec.","status":"closed","priority":1,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:12.361634-05:00","created_by":"chazu","updated_at":"2026-01-18T18:32:47.050177-05:00","closed_at":"2026-01-18T18:32:47.050177-05:00","close_reason":"Duplicate of maggie-691"}
{"id":"maggie-b66","title":"Architecture: CompilerBackend interface in VM","description":"Create vm/compiler_dispatch.go with CompilerBackend interface: Compile(source, class) -\u003e CompiledMethod. Two implementations: GoCompilerBackend (wraps compiler/ package) and MaggieCompilerBackend (invokes Compiler class in VM).","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:58:30.162303-05:00","created_by":"chazu","updated_at":"2026-01-19T19:50:12.411916-05:00","closed_at":"2026-01-19T19:50:12.411916-05:00","close_reason":"Implemented CompilerBackend interface with GoCompilerBackend and MaggieCompilerBackend in vm/compiler_dispatch.go. Added VM methods UseGoCompiler, UseMaggieCompiler, Compile, CompileExpression","dependencies":[{"issue_id":"maggie-b66","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:58:52.670393-05:00","created_by":"chazu"},{"issue_id":"maggie-b66","depends_on_id":"maggie-gzt","type":"blocks","created_at":"2026-01-19T18:58:52.99252-05:00","created_by":"chazu"}]}
{"id":"maggie-b6e","title":"Codegen: emit message sends","description":"Emit SEND with selector ID and argument count. Also emit optimized sends (SEND_PLUS, SEND_AT, etc.) for common selectors. Test: compile '1 + 2' emits SEND_PLUS","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:09.783094-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.01209-05:00","closed_at":"2026-01-19T19:44:24.01209-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-b6e","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.390982-05:00","created_by":"chazu"}]}
{"id":"maggie-bgb","title":"Implement Debugger development tool","description":"Debug server: breakpoints, pause/resume, step over/into/out, call stack inspection, variable inspection, eval-in-context. JSON protocol over TCP.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:45.620901-05:00","created_by":"chazu","updated_at":"2026-01-18T18:40:34.156256-05:00","closed_at":"2026-01-18T18:40:34.156256-05:00","close_reason":"Implemented with tests, all passing","dependencies":[{"issue_id":"maggie-bgb","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:18.517819-05:00","created_by":"chazu"}]}
{"id":"maggie-bm5","title":"AST: Implement MessageSendNode class","description":"Create MessageSendNode for message sends. Fields: receiver, selector, arguments. Methods: receiver, selector, arguments, isUnary, isBinary, isKeyword, accept:. Test: (MessageSendNode receiver: x selector: #+ arguments: #(y))","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:18.058569-05:00","created_by":"chazu","updated_at":"2026-01-19T19:03:07.774165-05:00","closed_at":"2026-01-19T19:03:07.774165-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-bm5","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.166029-05:00","created_by":"chazu"}]}
{"id":"maggie-c10","title":"AST: Implement LiteralNode class","description":"Create LiteralNode for numbers, strings, symbols, literal arrays. Fields: value, literalType. Methods: value, isLiteral, accept: (visitor pattern). Test: (LiteralNode value: 42) value = 42","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:01.766947-05:00","created_by":"chazu","updated_at":"2026-01-19T19:02:11.059221-05:00","closed_at":"2026-01-19T19:02:11.059221-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-c10","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.44729-05:00","created_by":"chazu"}]}
{"id":"maggie-c2o","title":"Bug: primitiveAt and primitiveAtPut are placeholder stubs","description":"primitiveAt and primitiveAtPut in interpreter are placeholders returning Nil instead of actual implementations. Location: vm/interpreter.go lines 1377-1385. These need proper implementations for array/collection access.","status":"closed","priority":2,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:09.163051-05:00","created_by":"chazu","updated_at":"2026-01-21T21:08:00.033316-05:00","closed_at":"2026-01-21T21:08:00.033316-05:00","close_reason":"Fixed with tests"}
{"id":"maggie-cft","title":"Implement Channel primitive class","description":"Implement Channel class wrapping Go channels. Primitives: new, new:, send:, receive, tryReceive, close, isClosed. Support typed and buffered channels.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:16.518246-05:00","created_by":"chazu","updated_at":"2026-01-18T18:04:38.924212-05:00","closed_at":"2026-01-18T18:04:38.924212-05:00","close_reason":"Implemented Channel and Process primitives with full test coverage"}
{"id":"maggie-cgn","title":"Bootstrap: compile lib/compiler/*.mag files","description":"Update cmd/bootstrap to also compile files from lib/compiler/ directory. Ensures Maggie Compiler class is in the image. Order: core classes first, then compiler classes.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:58:43.108734-05:00","created_by":"chazu","updated_at":"2026-01-19T19:57:49.354783-05:00","closed_at":"2026-01-19T19:57:49.354783-05:00","close_reason":"Bootstrap now loads lib/compiler/*.mag files, creates compiler classes dynamically (Token, Parser, Lexer, BytecodeGenerator, Compiler, etc.), and registers them as globals. Fixed cascade parsing bug to support standard Smalltalk syntax.","dependencies":[{"issue_id":"maggie-cgn","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:58:52.891544-05:00","created_by":"chazu"},{"issue_id":"maggie-cgn","depends_on_id":"maggie-gzt","type":"blocks","created_at":"2026-01-19T18:58:53.197526-05:00","created_by":"chazu"}]}
{"id":"maggie-chl","title":"Document: Keep Go compiler for AOT compilation","description":"Document dual-compiler architecture in MAGGIE_DESIGN.md: (1) Go compiler in compiler/ for AOT and bootstrap, (2) Maggie compiler in lib/compiler/ for live development, (3) CompilerBackend interface for switching, (4) Use cases table: bootstrap=Go, AOT=Go, REPL=Maggie, hot reload=Maggie.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:12:25.735766-05:00","created_by":"chazu","updated_at":"2026-01-21T21:30:04.568413-05:00","closed_at":"2026-01-21T21:30:04.568413-05:00","close_reason":"Documented dual-compiler architecture in MAGGIE_DESIGN.md","dependencies":[{"issue_id":"maggie-chl","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.094772-05:00","created_by":"chazu"}]}
{"id":"maggie-cn6","title":"Parser: parse assignments","description":"Parse assignment statements (x := expr). Create AssignmentNode with variable and value. Test: (Parser on: 'x := 42') produces AssignmentNode","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:30.231476-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.580215-05:00","closed_at":"2026-01-19T19:12:43.580215-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-cn6","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.040379-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:16.237395-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:16.331503-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:16.419464-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:16.52156-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:16.653423-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:16.756275-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:16.860566-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:16.959044-05:00","created_by":"chazu"},{"issue_id":"maggie-cn6","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:17.053339-05:00","created_by":"chazu"}]}
{"id":"maggie-cpv","title":"Implement UndefinedObject (nil) class","description":"Implement UndefinedObject class for nil value. Primitives: isNil (^true), notNil (^false), ifNil:, ifNotNil:, ifNil:ifNotNil:. Special handling in doesNotUnderstand:.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:37.44114-05:00","created_by":"chazu","updated_at":"2026-01-18T17:26:19.996595-05:00","closed_at":"2026-01-18T17:26:19.996595-05:00","close_reason":"UndefinedObject fully implemented with isNil, notNil, ifNil:, ifNotNil:, ifNil:ifNotNil:","dependencies":[{"issue_id":"maggie-cpv","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.243169-05:00","created_by":"chazu"},{"issue_id":"maggie-cpv","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.702562-05:00","created_by":"chazu"}]}
{"id":"maggie-d6e","title":"Implement Smalltalk lexer/tokenizer","description":"Implement lexer for Smalltalk syntax: identifiers, keywords, binary selectors, numbers (integer, float), strings, symbols, comments, special characters. Output token stream for parser.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:09.471476-05:00","created_by":"chazu","updated_at":"2026-01-18T17:36:29.825899-05:00","closed_at":"2026-01-18T17:36:29.825899-05:00","close_reason":"Implemented Smalltalk lexer in compiler/lexer.go and compiler/token.go. Handles: integers (with radix), floats (with exponent), strings (with escapes), symbols (normal, quoted, binary), characters, identifiers, keywords, binary selectors, reserved words (self, super, nil, true, false, thisContext), comments. 17 tests passing."}
{"id":"maggie-dno","title":"AST: Implement MethodNode class","description":"Create MethodNode for method definitions. Fields: selector, parameters, temporaries, statements, primitive (optional). Methods: selector, parameters, arity, body, accept:. Test: methodNode selector = #increment:","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:39.212039-05:00","created_by":"chazu","updated_at":"2026-01-19T19:03:58.627416-05:00","closed_at":"2026-01-19T19:03:58.627416-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-dno","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.797174-05:00","created_by":"chazu"}]}
{"id":"maggie-dtt","title":"Parser: parse unary messages","description":"Parse unary message sends (receiver message). Chain multiple unary messages left-to-right. Test: (Parser on: 'x negated abs') parseUnary is a chain of 2 message sends","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:59.94773-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.557422-05:00","closed_at":"2026-01-19T19:12:43.557422-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-dtt","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.522237-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:11.616913-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:11.71034-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:11.801546-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:11.892447-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:11.982374-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:12.079228-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:12.177784-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:12.277393-05:00","created_by":"chazu"},{"issue_id":"maggie-dtt","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:12.369341-05:00","created_by":"chazu"}]}
{"id":"maggie-e36","title":"Design review: Non-local returns via panic/recover","description":"Questionable design: Non-local returns use panic/recover (interpreter.go lines 229-254, 827-832). While this works, it's slower than a proper return stack and makes debugging difficult. Consider implementing a proper return stack mechanism.","status":"closed","priority":3,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:19.84797-05:00","created_by":"chazu","updated_at":"2026-01-21T21:29:48.263566-05:00","closed_at":"2026-01-21T21:29:48.263566-05:00","close_reason":"Design Review Complete.\n\n**Current Design Analysis:**\nNon-local returns use Go's panic/recover mechanism (interpreter.go:267-297, 974-980):\n- NonLocalReturn struct carries the return value and target frame\n- Execute() sets up defer with recover to catch non-local returns\n- Block return panics with NonLocalReturn, caught by the home method's defer\n\n**Trade-offs:**\n\nPros of panic/recover approach:\n1. **Simplicity**: Leverages Go's existing stack unwinding\n2. **Correctness**: Automatically handles arbitrary nesting depth\n3. **Interop**: Works correctly across Go/Maggie boundaries (primitives can call blocks)\n4. **Safety**: Properly validates home frame is still valid before returning\n\nCons:\n1. **Performance**: panic/recover is ~100-500ns overhead per non-local return\n2. **Debugging**: Go stack traces include panic machinery, can be confusing\n3. **Profiling**: pprof may show misleading hotspots in recover handlers\n\n**Alternative: Explicit return stack**\nA return stack approach would:\n- Maintain an explicit \"return target\" stack alongside the call stack\n- Check return targets after each block evaluation\n- Avoid panic/recover overhead\n\n**Recommendation: Keep current design**\n\nReasons:\n1. Non-local returns are relatively rare (only explicit ^ in blocks)\n2. The 100-500ns overhead is negligible compared to interpreter dispatch\n3. Correctness and simplicity outweigh micro-optimization\n4. A return stack would add complexity to every block invocation path\n\n**When to reconsider**: If profiling shows non-local return as a hotspot (unlikely), or if implementing a tracing JIT where panic/recover would interfere with optimization.\n\nThe current implementation is well-designed with proper goroutine boundary checking and frame validity validation."}
{"id":"maggie-e3z","title":"Parser: parse return statements","description":"Parse return statements (^expr). Create ReturnNode with expression. Test: (Parser on: '^self') produces ReturnNode","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:35.343494-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.583521-05:00","closed_at":"2026-01-19T19:12:43.583521-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-e3z","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.94827-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:17.159817-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:17.277073-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:17.36896-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:17.461986-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:17.558992-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:17.657428-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:17.746952-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:17.844035-05:00","created_by":"chazu"},{"issue_id":"maggie-e3z","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:17.935313-05:00","created_by":"chazu"}]}
{"id":"maggie-egg","title":"Phase 4: Self-Hosting Compiler (Epic)","description":"Write Maggie compiler in Maggie itself. Keep Go compiler for AOT compilation. Bootstrap: compile Maggie compiler with Go compiler, then compile compiler with itself.","status":"closed","priority":2,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:07:16.685008-05:00","created_by":"chazu","updated_at":"2026-01-19T18:08:32.408424-05:00","closed_at":"2026-01-19T18:08:32.408424-05:00","close_reason":"Duplicate epic - using maggie-8rg instead"}
{"id":"maggie-eij","title":"Benchmarking Suite Epic","description":"Create a comprehensive benchmarking suite for Maggie to establish performance baselines for future optimizations. Covers interpreter performance, primitive operations, memory allocation, and real-world workloads.","status":"closed","priority":2,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:01.106448-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:25.54553-05:00","closed_at":"2026-01-22T09:18:25.54553-05:00","close_reason":"All benchmark subtasks completed - comprehensive benchmark suite in vm/benchmark_test.go"}
{"id":"maggie-f3p","title":"Implement Object layout and slot access","description":"Implement Object struct with vtable pointer and hybrid slot storage (4 inline slots + overflow slice). Include getSlot/setSlot methods. This is the foundation for all heap-allocated objects.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:18.179986-05:00","created_by":"chazu","updated_at":"2026-01-18T16:58:34.870536-05:00","closed_at":"2026-01-18T16:58:34.870536-05:00","close_reason":"Implemented Object struct with hybrid slot storage (4 inline + overflow), VTable/Class/Method placeholders, Value conversion helpers. 21 tests pass, slot access \u003c0.5ns.","dependencies":[{"issue_id":"maggie-f3p","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:58.961554-05:00","created_by":"chazu"},{"issue_id":"maggie-f3p","depends_on_id":"maggie-6kq","type":"blocks","created_at":"2026-01-18T16:46:12.794859-05:00","created_by":"chazu"}]}
{"id":"maggie-f7f","title":"Implement VM struct and bootstrap","description":"Implement VM struct: namespaces, globals, selectorTable, symbolTable, well-known vtables. Bootstrap sequence: create Object, Integer, Float, String, Array, Block, Boolean, UndefinedObject, Symbol classes.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:41.051105-05:00","created_by":"chazu","updated_at":"2026-01-18T17:20:36.395885-05:00","closed_at":"2026-01-18T17:20:36.395885-05:00","close_reason":"Implemented VM struct with bootstrap, 17 core classes, primitives, and 17 tests with 20-22ns/op sends","dependencies":[{"issue_id":"maggie-f7f","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.454869-05:00","created_by":"chazu"},{"issue_id":"maggie-f7f","depends_on_id":"maggie-8t1","type":"blocks","created_at":"2026-01-18T16:46:13.435922-05:00","created_by":"chazu"},{"issue_id":"maggie-f7f","depends_on_id":"maggie-85t","type":"blocks","created_at":"2026-01-18T16:46:13.54243-05:00","created_by":"chazu"}]}
{"id":"maggie-fgf","title":"AST: Implement AssignmentNode class","description":"Create AssignmentNode for variable assignments. Fields: variable (VariableNode), value (expression node). Methods: variable, value, isAssignment, accept:. Test: (AssignmentNode variable: varNode value: litNode)","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:12.418855-05:00","created_by":"chazu","updated_at":"2026-01-19T19:02:22.34126-05:00","closed_at":"2026-01-19T19:02:22.34126-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-fgf","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.258839-05:00","created_by":"chazu"}]}
{"id":"maggie-gti","title":"Architecture: VM compiler switching","description":"Add VM methods UseGoCompiler() and UseMaggieCompiler() to switch active compiler backend. Default to Maggie after bootstrap. Go compiler always used by cmd/bootstrap and cmd/magc (AOT). Maggie compiler used for live REPL and hot reload.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:58:36.92953-05:00","created_by":"chazu","updated_at":"2026-01-19T19:50:12.415774-05:00","closed_at":"2026-01-19T19:50:12.415774-05:00","close_reason":"Implemented CompilerBackend interface with GoCompilerBackend and MaggieCompilerBackend in vm/compiler_dispatch.go. Added VM methods UseGoCompiler, UseMaggieCompiler, Compile, CompileExpression","dependencies":[{"issue_id":"maggie-gti","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:58:52.772408-05:00","created_by":"chazu"},{"issue_id":"maggie-gti","depends_on_id":"maggie-b66","type":"blocks","created_at":"2026-01-19T18:58:53.094079-05:00","created_by":"chazu"}]}
{"id":"maggie-guc","title":"Benchmark: Classic algorithms","description":"Implement classic benchmarks in Maggie: fibonacci, factorial, tak, sieve of eratosthenes, quicksort. Compare with equivalent Go implementations.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:30.653506-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.5311-05:00","closed_at":"2026-01-22T09:18:20.5311-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-guc","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:47.802104-05:00","created_by":"chazu"}]}
{"id":"maggie-gzt","title":"Architecture: lib/compiler/ directory for Maggie compiler","description":"Create lib/compiler/ subdirectory to hold Maggie compiler classes: Token.mag, CharacterStream.mag, Lexer.mag, Parser.mag, ASTNodes.mag, Compiler.mag. Keeps compiler separate from core library classes.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:58:23.610657-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:54.659164-05:00","closed_at":"2026-01-19T19:08:54.659164-05:00","close_reason":"Created lib/compiler/ directory with Token, CharacterStream, Lexer, and AST node classes","dependencies":[{"issue_id":"maggie-gzt","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:58:52.545207-05:00","created_by":"chazu"}]}
{"id":"maggie-hqt","title":"Codegen: compile full method","description":"Compile MethodNode to CompiledMethod. Set selector, arity, numTemps, literals, bytecode, blocks. Test: compile 'increment [value := value + 1. ^value]' produces working CompiledMethod","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:38.411841-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.030698-05:00","closed_at":"2026-01-19T19:44:24.030698-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-hqt","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.885648-05:00","created_by":"chazu"}]}
{"id":"maggie-hzz","title":"Codegen: emit jump instructions","description":"Emit JUMP, JUMP_TRUE, JUMP_FALSE. Use forward references for jumps. Backpatch offsets after target is known. Test: compile ifTrue:ifFalse: emits JUMP_FALSE with correct offset","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:15.523292-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.015395-05:00","closed_at":"2026-01-19T19:44:24.015395-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-hzz","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.291408-05:00","created_by":"chazu"}]}
{"id":"maggie-ia7","title":"Implement primitive Array class","description":"Implement Array as growable Value slice. Primitives: size, at:, at:put:, add:, do:, collect:, select:, includes:, indexOf:, copyFrom:to:, asArray. Fixed-size vs dynamic variants.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:32.980206-05:00","created_by":"chazu","updated_at":"2026-01-18T17:29:40.689745-05:00","closed_at":"2026-01-18T17:29:40.689745-05:00","close_reason":"Array primitives scaffolded: size, at:, at:put:. Full Array implementation deferred to heap objects phase - Phase 1 focuses on immediate values.","dependencies":[{"issue_id":"maggie-ia7","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.91385-05:00","created_by":"chazu"},{"issue_id":"maggie-ia7","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.388799-05:00","created_by":"chazu"}]}
{"id":"maggie-iwt","title":"Benchmark: Interpreter dispatch overhead","description":"Benchmark core interpreter loop: opcode fetch/decode, stack operations, frame management. Measure ns/opcode for common instruction sequences.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:19.39124-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.416834-05:00","closed_at":"2026-01-22T09:18:20.416834-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-iwt","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:45.149791-05:00","created_by":"chazu"}]}
{"id":"maggie-j08","title":"Parser: parse primary expressions","description":"Parse literals, variables, blocks, parenthesized expressions. Primary = literal | variable | block | '(' expression ')'. Test: (Parser on: '42') parsePrimary isLiteral","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:54.617642-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.552555-05:00","closed_at":"2026-01-19T19:12:43.552555-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-j08","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.613077-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:10.741768-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:10.836148-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:10.927576-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:11.023034-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:11.119597-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:11.224898-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:11.31765-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:11.41473-05:00","created_by":"chazu"},{"issue_id":"maggie-j08","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:11.524194-05:00","created_by":"chazu"}]}
{"id":"maggie-j5o","title":"Bootstrap: compile Maggie compiler with Go compiler","description":"Use existing Go compiler to compile the Maggie Lexer, Parser, AST, and Compiler classes from .mag files. Verify all compiler classes work. Test: Maggie compiler can compile simple methods","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:12:07.030838-05:00","created_by":"chazu","updated_at":"2026-01-19T19:57:49.381146-05:00","closed_at":"2026-01-19T19:57:49.381146-05:00","close_reason":"Bootstrap now loads lib/compiler/*.mag files, creates compiler classes dynamically (Token, Parser, Lexer, BytecodeGenerator, Compiler, etc.), and registers them as globals. Fixed cascade parsing bug to support standard Smalltalk syntax.","dependencies":[{"issue_id":"maggie-j5o","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.400597-05:00","created_by":"chazu"},{"issue_id":"maggie-j5o","depends_on_id":"maggie-ryw","type":"blocks","created_at":"2026-01-19T18:13:28.919557-05:00","created_by":"chazu"}]}
{"id":"maggie-ja1","title":"Benchmark: Object allocation and GC","description":"Benchmark object creation (new), slot access, and garbage collection. Measure allocation rate and GC pause times.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:25.100478-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.47559-05:00","closed_at":"2026-01-22T09:18:20.47559-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-ja1","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:45.404874-05:00","created_by":"chazu"}]}
{"id":"maggie-jze","title":"Implement Block and closure support","description":"Implement Block struct: vtable, BlockMethod (bytecode), captured environment, home ActivationRecord. Primitives: value, value:, value:value:, whileTrue:, whileFalse:. Fast-path block invocation in interpreter.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:34.515451-05:00","created_by":"chazu","updated_at":"2026-01-18T17:28:32.342649-05:00","closed_at":"2026-01-18T17:28:32.342649-05:00","close_reason":"Block primitives: value, value:, value:value:, whileTrue, whileTrue:, whileFalse:. Block execution integrated with interpreter.","dependencies":[{"issue_id":"maggie-jze","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:46:00.01585-05:00","created_by":"chazu"},{"issue_id":"maggie-jze","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.494588-05:00","created_by":"chazu"}]}
{"id":"maggie-k2h","title":"Codegen: emit return instructions","description":"Emit RETURN_TOP, RETURN_SELF, RETURN_NIL, BLOCK_RETURN. Handle implicit return self at end of method. Test: compile '^42' emits PUSH_INT8 42, RETURN_TOP","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:21.716589-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.019163-05:00","closed_at":"2026-01-19T19:44:24.019163-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-k2h","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.19983-05:00","created_by":"chazu"}]}
{"id":"maggie-kpm","title":"Implement Block evaluation primitives","description":"Add Go primitives for Block class: value, value:, value:value:, value:value:value:. Currently Block.mag defines these as calling primValue etc. but the primitives aren't registered in the VM.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T20:53:07.742411-05:00","created_by":"chazu","updated_at":"2026-01-18T21:07:14.875301-05:00","closed_at":"2026-01-18T21:07:14.875301-05:00","close_reason":"Implemented block evaluation primitives. Added tagBlock encoding, updated vtableFor, ClassFor, primitiveClass, and Send to handle block values. Registered primValue, primValue:, primValue:value:, primValue:value:value: on BlockClass."}
{"id":"maggie-ksg","title":"Benchmark: Concurrency primitives","description":"Benchmark Channel send/receive, Process fork/join, select operations. Measure goroutine spawn overhead and channel throughput.","status":"closed","priority":3,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:32.482103-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.548892-05:00","closed_at":"2026-01-22T09:18:20.548892-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-ksg","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:47.883733-05:00","created_by":"chazu"}]}
{"id":"maggie-l16","title":"Lexer: handle comments and whitespace","description":"Skip # line comments and double-quote comments. Skip whitespace between tokens. Test: (Lexer on: 'foo # comment') allTokens size = 2 (foo + EOF)","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:08:51.104922-05:00","created_by":"chazu","updated_at":"2026-01-19T19:08:47.464843-05:00","closed_at":"2026-01-19T19:08:47.464843-05:00","close_reason":"Implemented in lib/compiler/Lexer.mag","dependencies":[{"issue_id":"maggie-l16","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:50.539361-05:00","created_by":"chazu"},{"issue_id":"maggie-l16","depends_on_id":"maggie-9nf","type":"blocks","created_at":"2026-01-19T18:13:02.057237-05:00","created_by":"chazu"}]}
{"id":"maggie-mj0","title":"Benchmark: Collection operations","description":"Benchmark Array and Dictionary: at:, at:put:, size, do:, collect:, select:. Include iteration and bulk operations.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:28.672704-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.511844-05:00","closed_at":"2026-01-22T09:18:20.511844-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-mj0","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:47.715103-05:00","created_by":"chazu"}]}
{"id":"maggie-mrk","title":"Add semantic analysis phase between parsing and codegen","description":"Medium priority recommendation: Add a semantic analysis phase to: 1) Check for undefined variables before codegen, 2) Resolve variable scopes during analysis not codegen, 3) Detect unreachable code. Currently the pipeline goes directly from parser to codegen with no intermediate analysis.","status":"closed","priority":2,"issue_type":"feature","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:23.856763-05:00","created_by":"chazu","updated_at":"2026-01-21T21:30:10.325232-05:00","closed_at":"2026-01-21T21:30:10.325232-05:00","close_reason":"Created semantic.go with SemanticAnalyzer that checks for undefined variables, unreachable code, and invalid assignments. Integrated into Compile functions."}
{"id":"maggie-pcd","title":"Parser: parse keyword messages","description":"Parse keyword message sends (x at: 1 put: 2). Collect all keyword parts into single selector. Precedence: unary \u003e binary \u003e keyword. Test: (Parser on: 'a at: 1 + 2 put: b') selector = #at:put:","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:12.790744-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.5652-05:00","closed_at":"2026-01-19T19:12:43.5652-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-pcd","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.31827-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:13.369156-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:13.463518-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:13.571496-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:13.685453-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:13.789134-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:13.898061-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:13.996383-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:14.08805-05:00","created_by":"chazu"},{"issue_id":"maggie-pcd","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:14.193481-05:00","created_by":"chazu"}]}
{"id":"maggie-pdo","title":"Bug: digitStart variable computed but unused in lexer","description":"The digitStart variable in readNumber() is computed but never used. Location: compiler/lexer.go line 339, 375. Either use it or remove the dead code.","status":"closed","priority":3,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:10.68472-05:00","created_by":"chazu","updated_at":"2026-01-21T21:08:00.037611-05:00","closed_at":"2026-01-21T21:08:00.037611-05:00","close_reason":"Fixed with tests"}
{"id":"maggie-pgj","title":"Implement primitive String class","description":"Implement String as immutable byte sequence. Primitives: size, at:, ,, =, \u003c, asSymbol, asNumber, do:, copyFrom:to:, indexOf:. Strings are heap objects with embedded byte data.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:31.682607-05:00","created_by":"chazu","updated_at":"2026-01-18T17:29:39.109803-05:00","closed_at":"2026-01-18T17:29:39.109803-05:00","close_reason":"String primitives scaffolded: size, asSymbol, =. Full String implementation deferred to heap objects phase - Phase 1 uses symbols for string-like values.","dependencies":[{"issue_id":"maggie-pgj","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.812005-05:00","created_by":"chazu"},{"issue_id":"maggie-pgj","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.282235-05:00","created_by":"chazu"}]}
{"id":"maggie-pgv","title":"Codegen: emit block creation","description":"Emit CREATE_BLOCK with block method index and capture count. Emit CAPTURE_TEMP/CAPTURE_IVAR for captured variables. Test: compile '[:x | x + y]' captures y from outer scope","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:27.110632-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:24.022921-05:00","closed_at":"2026-01-19T19:44:24.022921-05:00","close_reason":"Implemented in lib/compiler/BytecodeGenerator.mag","dependencies":[{"issue_id":"maggie-pgv","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.098934-05:00","created_by":"chazu"}]}
{"id":"maggie-phc","title":"Clean up legacy Procyon/Trashtalk code","description":"Remove or archive the old Bash-targeting compiler code. Rename module from procyon to maggie. Keep go.mod deps (jennifer, grpc). Clear out pkg/, lib/, cmd/, testdata/ that won't be reused.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:15.327674-05:00","created_by":"chazu","updated_at":"2026-01-18T16:49:03.491584-05:00","closed_at":"2026-01-18T16:49:03.491584-05:00","close_reason":"Removed all legacy Procyon/Trashtalk code. Renamed module to github.com/chazu/maggie. Created vm/ package skeleton.","dependencies":[{"issue_id":"maggie-phc","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:58.759789-05:00","created_by":"chazu"}]}
{"id":"maggie-qg9","title":"Implement Process primitive class","description":"Implement Process class wrapping goroutines. Primitives: fork (on Block), yield, sleep:, current, terminate. Track process state and enable join.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:18.488353-05:00","created_by":"chazu","updated_at":"2026-01-18T18:04:38.946429-05:00","closed_at":"2026-01-18T18:04:38.946429-05:00","close_reason":"Implemented Channel and Process primitives with full test coverage"}
{"id":"maggie-qrz","title":"Unify run() and runBlock() interpreter loops","description":"The run() and runBlock() methods in vm/interpreter.go duplicate ~300 lines of opcode handling. Extract common opcode handling into a shared method. The only differences are: block frames have HomeBP/HomeFrame for outer variable access, and returns behave differently (non-local vs local). This is the single biggest maintenance burden in the codebase.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:23:57.895018-05:00","created_by":"chazu","updated_at":"2026-01-21T20:28:37.74497-05:00","closed_at":"2026-01-21T20:28:37.74497-05:00","close_reason":"Unified run() and runBlock() into single runFrame() method, removing ~300 lines of duplicate code"}
{"id":"maggie-qt5","title":"Implement primitive Integer/Float classes","description":"Implement SmallInteger primitives: +, -, *, /, //, \\\\, \u003c, \u003e, \u003c=, \u003e=, =, negated, abs, to:do:, timesRepeat:. Implement Float primitives similarly. Handle SmallInt overflow to LargeInteger (stub for now).","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T16:45:29.659695-05:00","created_by":"chazu","updated_at":"2026-01-18T17:28:30.756252-05:00","closed_at":"2026-01-18T17:28:30.756252-05:00","close_reason":"SmallInteger primitives: +, -, *, /, //, \\\\, \u003c, \u003e, \u003c=, \u003e=, =, negated, abs, timesRepeat:, to:do:, bitAnd:, bitOr:, bitXor:. Float primitives: +, -, *, /, \u003c, \u003e, negated, abs, truncated, rounded.","dependencies":[{"issue_id":"maggie-qt5","depends_on_id":"maggie-3ib","type":"parent-child","created_at":"2026-01-18T16:45:59.711436-05:00","created_by":"chazu"},{"issue_id":"maggie-qt5","depends_on_id":"maggie-f7f","type":"blocks","created_at":"2026-01-18T16:46:15.176525-05:00","created_by":"chazu"}]}
{"id":"maggie-r20","title":"Implement value encoding for image serialization","description":"Encode/decode Values for image format: floats, SmallInts, objects, nil/true/false, symbols, strings, classes, methods. Handle object references via indices.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:41.7816-05:00","created_by":"chazu","updated_at":"2026-01-18T18:40:34.113942-05:00","closed_at":"2026-01-18T18:40:34.113942-05:00","close_reason":"Implemented with tests, all passing","dependencies":[{"issue_id":"maggie-r20","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:14.952666-05:00","created_by":"chazu"}]}
{"id":"maggie-ryw","title":"Integration: compile method from source string","description":"Create Compiler class with compile: method that takes a source string and returns CompiledMethod. Wire up Lexer -\u003e Parser -\u003e Codegen pipeline. Test: Compiler new compile: 'foo [^42]'","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:11:49.09222-05:00","created_by":"chazu","updated_at":"2026-01-19T19:44:51.845342-05:00","closed_at":"2026-01-19T19:44:51.845342-05:00","close_reason":"Implemented in lib/compiler/Compiler.mag - compile: method","dependencies":[{"issue_id":"maggie-ryw","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.686325-05:00","created_by":"chazu"},{"issue_id":"maggie-ryw","depends_on_id":"maggie-hqt","type":"blocks","created_at":"2026-01-19T18:13:28.832427-05:00","created_by":"chazu"}]}
{"id":"maggie-sm5","title":"Parser: parse method definitions","description":"Parse method: selector [body] syntax. Handle unary (method: foo []), binary (method: + other []), and keyword selectors (method: at: i put: v []). Test: parser parseMethodDef selector = #at:put:","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:10:41.518739-05:00","created_by":"chazu","updated_at":"2026-01-19T19:12:43.586737-05:00","closed_at":"2026-01-19T19:12:43.586737-05:00","close_reason":"Implemented in lib/compiler/Parser.mag","dependencies":[{"issue_id":"maggie-sm5","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:48.856387-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-c10","type":"blocks","created_at":"2026-01-19T18:13:18.031111-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-5qz","type":"blocks","created_at":"2026-01-19T18:13:18.122656-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-fgf","type":"blocks","created_at":"2026-01-19T18:13:18.229821-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-bm5","type":"blocks","created_at":"2026-01-19T18:13:18.347926-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-81g","type":"blocks","created_at":"2026-01-19T18:13:18.447355-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-vei","type":"blocks","created_at":"2026-01-19T18:13:18.55352-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-snq","type":"blocks","created_at":"2026-01-19T18:13:18.649322-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-dno","type":"blocks","created_at":"2026-01-19T18:13:18.745573-05:00","created_by":"chazu"},{"issue_id":"maggie-sm5","depends_on_id":"maggie-8wy","type":"blocks","created_at":"2026-01-19T18:13:18.844338-05:00","created_by":"chazu"}]}
{"id":"maggie-smz","title":"Design review: Symbol tags for string/dictionary encoding","description":"Questionable design: String, Dictionary, GrpcClient, GrpcStream, Result are all encoded using the symbol tag, requiring cascading checks in vtableFor() (lines 1059-1146 in interpreter.go). Consider using object pointers instead to simplify dispatch logic.","status":"closed","priority":3,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:15.035595-05:00","created_by":"chazu","updated_at":"2026-01-21T21:29:24.866734-05:00","closed_at":"2026-01-21T21:29:24.866734-05:00","close_reason":"Design Review Complete.\n\n**Current Design Analysis:**\nThe vtableFor() function (interpreter.go:870-958) uses cascading type checks on symbol-tagged values:\n- IsStringValue(v) → String\n- IsDictionaryValue(v) → Dictionary  \n- isGrpcClientValue(v) → GrpcClient\n- isGrpcStreamValue(v) → GrpcStream\n- isResultValue(v) → Success/Failure\n\n**Trade-offs:**\n1. **Memory efficiency**: Symbol-tagging avoids heap allocation for these values, keeping them as 64-bit NaN-boxed values\n2. **Performance cost**: Every dispatch requires cascading type checks (O(n) where n = number of symbol-encoded types)\n3. **Complexity**: Adding new symbol-encoded types requires updating multiple dispatch sites\n\n**Recommendation: Keep current design with minor optimization**\n\nReasons:\n1. The types being encoded (strings, dictionaries) are frequently created and benefit from avoiding heap allocation\n2. The cascading checks are O(1) in practice (constant number of types)\n3. Converting to object pointers would require heap allocation for every string/dictionary creation\n\n**Suggested optimization**: Create a type-tag lookup table at VM init that maps high symbol IDs to vtables, replacing cascading if-else with a single table lookup:\n\n```go\nfunc (i *Interpreter) vtableFor(v Value) *VTable {\n    if v.IsSymbol() {\n        id := v.SymbolID()\n        if vt := i.symbolTypeVTables[id\u003e\u003e48]; vt != nil {\n            return vt\n        }\n    }\n    // ... rest of dispatch\n}\n```\n\nThis would be a medium-priority optimization if profiling shows vtableFor as a hotspot."}
{"id":"maggie-sn2","title":"Implement ImageWriter (save VM state to binary)","description":"Serialize VM state: string table, symbol table, selector table, class definitions, compiled methods, objects, globals. Binary format per MAGGIE_DESIGN.md.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:38.095984-05:00","created_by":"chazu","updated_at":"2026-01-18T18:55:39.536814-05:00","closed_at":"2026-01-18T18:55:39.536814-05:00","close_reason":"Implemented with tests, all passing","dependencies":[{"issue_id":"maggie-sn2","depends_on_id":"maggie-r20","type":"blocks","created_at":"2026-01-18T18:32:03.742469-05:00","created_by":"chazu"},{"issue_id":"maggie-sn2","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:11.540973-05:00","created_by":"chazu"}]}
{"id":"maggie-snq","title":"AST: Implement ReturnNode class","description":"Create ReturnNode for return statements (^expr). Fields: expression. Methods: expression, isReturn, accept:. Test: (ReturnNode expression: litNode) expression = litNode","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:33.631388-05:00","created_by":"chazu","updated_at":"2026-01-19T19:04:04.646032-05:00","closed_at":"2026-01-19T19:04:04.646032-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-snq","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.888427-05:00","created_by":"chazu"}]}
{"id":"maggie-st0","title":"Phase 4: Self-Hosting Compiler (Epic)","description":"Write Maggie compiler in Maggie itself. Keep Go compiler for AOT compilation.","status":"closed","priority":2,"issue_type":"epic","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:07:28.772557-05:00","created_by":"chazu","updated_at":"2026-01-19T18:08:32.371922-05:00","closed_at":"2026-01-19T18:08:32.371922-05:00","close_reason":"Duplicate epic - using maggie-8rg instead"}
{"id":"maggie-tkx","title":"Bootstrap: triple bootstrap verification","description":"Self-compile the self-compiled compiler (stage 3). Verify stage 3 bytecode matches stage 2. This proves the compiler is stable. Test: stage2 bytecode == stage3 bytecode for all compiler classes","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:12:19.435585-05:00","created_by":"chazu","updated_at":"2026-01-22T16:31:44.512947-05:00","closed_at":"2026-01-22T16:31:44.512947-05:00","close_reason":"Triple bootstrap verification passes. All 10 test methods show Stage 2 == Stage 3 bytecode, proving the compiler is stable and correctly compiles itself.","dependencies":[{"issue_id":"maggie-tkx","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:47.201257-05:00","created_by":"chazu"},{"issue_id":"maggie-tkx","depends_on_id":"maggie-909","type":"blocks","created_at":"2026-01-19T18:13:29.107762-05:00","created_by":"chazu"}]}
{"id":"maggie-ust","title":"Implement Dictionary class","description":"Add Dictionary class with key-value storage. Methods needed: at:, at:put:, at:ifAbsent:, includesKey:, keys, values, size, isEmpty, do:, keysAndValuesDo:, removeKey:, removeKey:ifAbsent:. Should use Go map internally for O(1) lookup.","status":"closed","priority":2,"issue_type":"feature","owner":"chazbone@gmail.com","created_at":"2026-01-18T20:53:17.674235-05:00","created_by":"chazu","updated_at":"2026-01-19T10:40:10.397778-05:00","closed_at":"2026-01-19T10:40:10.397778-05:00","close_reason":"Implemented Dictionary class with Go map backend"}
{"id":"maggie-vei","title":"AST: Implement BlockNode class","description":"Create BlockNode for block literals. Fields: parameters, temporaries, statements. Methods: parameters, temporaries, statements, arity, accept:. Test: (BlockNode parameters: #(x y) temporaries: #() statements: stmts)","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-19T18:09:28.514174-05:00","created_by":"chazu","updated_at":"2026-01-19T19:03:08.769676-05:00","closed_at":"2026-01-19T19:03:08.769676-05:00","close_reason":"Implemented","dependencies":[{"issue_id":"maggie-vei","depends_on_id":"maggie-8rg","type":"parent-child","created_at":"2026-01-19T18:12:49.976659-05:00","created_by":"chazu"}]}
{"id":"maggie-w07","title":"Create initial development image","description":"Bootstrap image with core classes compiled from source: Object, Boolean, SmallInteger, Float, String, Symbol, Array, Block, Channel, Process, Result.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T18:31:47.530159-05:00","created_by":"chazu","updated_at":"2026-01-18T19:17:01.231982-05:00","closed_at":"2026-01-18T19:17:01.231982-05:00","close_reason":"Bootstrap tool compiles 167 methods from 16 .mag source files. Image load/save working correctly.","dependencies":[{"issue_id":"maggie-w07","depends_on_id":"maggie-sn2","type":"blocks","created_at":"2026-01-18T18:32:07.802067-05:00","created_by":"chazu"},{"issue_id":"maggie-w07","depends_on_id":"maggie-1y8","type":"blocks","created_at":"2026-01-18T18:32:09.861377-05:00","created_by":"chazu"},{"issue_id":"maggie-w07","depends_on_id":"maggie-691","type":"parent-child","created_at":"2026-01-18T18:32:20.542961-05:00","created_by":"chazu"}]}
{"id":"maggie-w3u","title":"Fix block registry memory leak","description":"Quick win: Add releaseBlock(id int) method to Interpreter that calls delete(blockRegistry, id). Call this when a block's home frame is popped. Location: vm/interpreter.go lines 1171-1173. The global blockRegistry map currently never removes blocks, causing unbounded memory growth.","status":"closed","priority":2,"issue_type":"bug","owner":"chazbone@gmail.com","created_at":"2026-01-21T19:24:05.309761-05:00","created_by":"chazu","updated_at":"2026-01-21T20:17:24.469415-05:00","closed_at":"2026-01-21T20:17:24.469415-05:00","close_reason":"Implemented with tests"}
{"id":"maggie-yg8","title":"Benchmark: Primitive arithmetic operations","description":"Benchmark SmallInteger and Float primitives: +, -, *, /, comparisons. Compare with native Go operations to measure overhead.","status":"closed","priority":2,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-22T09:04:20.900574-05:00","created_by":"chazu","updated_at":"2026-01-22T09:18:20.435968-05:00","closed_at":"2026-01-22T09:18:20.435968-05:00","close_reason":"Benchmarks implemented in vm/benchmark_test.go","dependencies":[{"issue_id":"maggie-yg8","depends_on_id":"maggie-eij","type":"parent-child","created_at":"2026-01-22T09:04:45.231217-05:00","created_by":"chazu"}]}
{"id":"maggie-z0e","title":"Define AST node types","description":"Define AST node types: LiteralNode (int, float, string, symbol, array), VariableNode, AssignmentNode, MessageNode, CascadeNode, BlockNode, MethodNode, ClassNode, ReturnNode. Include source locations for error reporting.","status":"closed","priority":1,"issue_type":"task","owner":"chazbone@gmail.com","created_at":"2026-01-18T17:32:12.807511-05:00","created_by":"chazu","updated_at":"2026-01-18T17:36:27.743032-05:00","closed_at":"2026-01-18T17:36:27.743032-05:00","close_reason":"Defined AST node types in compiler/ast.go: Position, Span, Node interface, expression nodes (IntLiteral, FloatLiteral, StringLiteral, SymbolLiteral, CharLiteral, ArrayLiteral, DynamicArray, Variable, Assignment, UnaryMessage, BinaryMessage, KeywordMessage, Cascade, Block, Self, Super, ThisContext), statement nodes (ExprStmt, Return), definition nodes (MethodDef, ClassDef, NamespaceDecl, ImportDecl, SourceFile)."}
